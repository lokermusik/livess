/*! myCast - Fantastic Shoutcast & Icecast Radio Player  v1.6 [12/18/17] - (c) 2017, Diego Navarro [dgone1988@gmail.com] */
!function(a){"use strict";a(".myCast").append('<div class="player-wpr"><div class="bg-wpr"> <div class="ppBtn play-btn"></div><div class="blur"></div><div class="data-panel animated"> <div class="data-panel-row"> <div class="data-panel-info"></span><span class="qualityTxt"></span><span class="genreTxt"></span></div><div class="data-panel-r-icon"><i class="fa fa-bolt" aria-hidden="true"></i></div></div><div class="data-panel-row"> <div class="data-panel-info"> <div class="history"> <ul></ul> </div></div><div class="data-panel-r-icon"><i class="fa fa-history" aria-hidden="true"></i></div></div><div class="data-panel-row"> <div class="data-panel-info"> <div class="share"> <ul> <li class="afacebook"><i class="fa fa-facebook facebook" aria-hidden="true"></i><a target="_blank" href="#">Facebook</a></li><li class="atwitter"><i class="fa fa-twitter twitter" aria-hidden="true"></i><a target="_blank" href="#">Twitter</a></li><li class="agoogle"><i class="fa fa-google google" aria-hidden="true"></i><a target="_blank" href="#">Google+</a></li></div></div><div class="data-panel-r-icon"><i class="fa fa-share-alt" aria-hidden="true"></i></div></div></div><div class="more fa"></div><div class="player-ctr"><div class="album-cover-wpr"> <div class="album-cover animated"></div></div><div class="album-cover-wpr2"> <div class="album-cover2 animated"></div></div><div class="track-info animated"> <div class="track-title animated"></div><div class="artist-name animated"></div></div><div class="controls-wpr animated"> <div class="vol-icon fa"></div><div class="volume-slider-wpr"> <input class="volume-slider" type="range" min="0" max="100" step="0.10" value="" autocomplete="off"><span class="vol-value"></span></div></div></div></div></div>'),a.fn.myCast=function(e){function t(e,t){a(e).toggleClass("playing",t)}function i(){if(U.paused){U.src=I.src,U.play();var e=a(".ppBtn.playing");0===a(L).find(e).length&&e.click()}else U.pause()}function s(){a(_).val()<55&&a(_).val()>0&&(a(M).removeClass("vol-icon3 vol-icon1"),a(M).addClass("vol-icon2")),0==a(_).val()?(a(M).removeClass("vol-icon2 vol-icon3"),a(M).addClass("vol-icon1")):a(_).val()>55&&(a(M).removeClass("vol-icon1 vol-icon2"),a(M).addClass("vol-icon3"))}function n(){return a(L).attr("data-tag")}function r(e){return e=e.toLowerCase(),e=a.trim(e),e.includes("&")?e=e.substr(0,e.indexOf(" &")):e.includes("feat")?e=e.substr(0,e.indexOf(" feat")):e.includes("ft.")&&(e=e.substr(0,e.indexOf(" ft."))),e}function l(e){return e=e.toLowerCase(),e=a.trim(e),e.includes("&")?e=e.replace("&","and"):e.includes("(")?e=e.substr(0,e.indexOf(" (")):e.includes("ft")&&(e=e.substr(0,e.indexOf(" ft"))),e}function o(e,t){function i(){a.ajax({type:"GET",dataType:"html",url:e,success:function(e){var i=a.parseHTML(e)[1].data,s=i.split(",")[6];if(s!=n()){u(s);var r=s.split("-"),l=r[0],o=r[1];c(l),d(o),p(i),v(l,o),f(t)}}})}function i(){a.ajax({dataType:"jsonp",url:e,success:function(a){if(a.songtitle!=n()){u(a.songtitle);var e=a.songtitle,i=e.split("-"),s=i[0],r=i[1];c(s),d(r),p(a),v(s,r),f(t)}}})}1==I.version?(i(),setInterval(i,12e3)):2==I.version&&(i(),setInterval(i,12e3))}function c(e){a(".artist-name",L).text(e),a(".artist-name",L).addClass("lightSpeedIn"),setTimeout(function(){a(".artist-name",L).removeClass("lightSpeedIn")},3e3)}function d(e){a(".track-title",L).text(e),a(".track-title",L).addClass("lightSpeedIn"),setTimeout(function(){a(".track-title",L).removeClass("lightSpeedIn")},3e3)}function u(e){a(L).attr("data-tag",e)}function v(e,t){e=r(e),t=l(t),e=encodeURI(e),t=encodeURI(t);var i="https://itunes.apple.com/search?term=="+e+"-"+t+"&media=music&limit=1";a.ajax({dataType:"jsonp",url:i,success:function(e){if(1==e.results.length)t=e.results[0].artworkUrl100,t=t.replace("100x100","300x300");else var t=I.logo;var i=I.blur_opacity;if(I.blur_opacity<.31)var s="5px";else var s="18px";a(".album-cover, .album-cover2",L).css({"background-image":"url("+t+")","background-size":"100% 100%"}),a(".album-cover, .album-cover2",L).addClass("fadeIn"),setTimeout(function(){a(".album-cover, .album-cover2",L).removeClass("fadeIn")},5e3),a(".blur",L).css({"background-image":"url("+t+")","background-position":"center center",opacity:+i,filter:"blur("+s+")","-ms-filter":"blur("+s+")","-webkit-filter":"blur("+s+")",transition:"opacity 1s ease-in","transition-delay":"1.5s"})},error:function(){console.log("Error on track title "+encodeURI(t))}})}function p(e){1==I.version?(a(".listenersTxt",L).text(H+": "+e.split(",")[0]),a(".qualityTxt",L).text(A+": "+e.split(",")[5]+"kbps")):2==I.version&&(a(".listenersTxt",L).text(H+": #"+e.currentlisteners),a(".qualityTxt",L).text(A+": "+e.bitrate+"k"),a(".genreTxt",L).text(E+": "+e.servergenre+", "+e.servergenre2))}function f(e){a(".history ul li",L).remove(),1==I.version?a.ajax({type:"GET",url:e,dataType:"html",success:function(e){var t=a(e).find("table")[2],i=(a(t),a(t).find("tbody")),s=a(i).find("tr"),n=a(s).find("td");a(".history ul",L).append("<li class='list' id='row'>1 - "+n[3].innerHTML+"</li><li class='list' id='row'>2 - "+n[6].innerHTML+"</li><li class='list' id='row'>3 - "+n[8].innerHTML+"</li><li class='list' id='row'>4 - "+n[10].innerHTML+"</li><li class='list' id='row'>5 - "+n[12].innerHTML+"</li><li class='list' id='row'>6 - "+n[14].innerHTML+"</li><li class='list' id='row'>7 - "+n[16].innerHTML+"</li>")}}):2==I.version&&a.ajax({dataType:"jsonp",url:e,success:function(e){for(var t=1;t<e.length;t++){var i=t,s=e[t].title;a(".history ul",L).append("<li class='list' id='row'>"+i+" - "+s+"</li>")}}})}function m(e){function t(){a.ajax({dataType:"json",url:e,success:function(a){var e=g(a);if(e.title!=n()){u(e.title);var t=e.title,i=t.split("-"),s=i[0],r=i[1];c(s),d(r),v(s,r),G.length>=20&&(G=[]),h(s,r),w(e)}}})}"icecast"==I.version&&(t(),setInterval(t,12e3))}function g(a){if(void 0===a.icestats.source.length)return a.icestats.source;for(var e=0;e<a.icestats.source.length;e++){var t=a.icestats.source[e].listenurl;if(t.indexOf(I.mount_point)>=0)return a.icestats.source[e]}}function h(a,e){b(e,a),y()}function b(a,e){G.unshift({ar:e,tt:a})}function y(){a(".history ul li",L).remove();for(var e=0;e<G.length;e++){var t=e,i=G[e].ar,s=G[e].tt;a(".history ul",L).append("<li class='list' id='row'>"+t+" - "+s+" - "+i+"</li>")}}function w(e){a(".listenersTxt",L).text(H+": "+e.listeners),a(".qualityTxt",L).text(A+": "+e.bitrate+"k"),a(".genreTxt",L).text(E+": "+e.genre)}function x(){setTimeout(function(){var a=window.location.href;C(a),k(a),T(a)},3500)}function C(e){var t="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(e);a("li.afacebook",L).find("a").attr("href",t)}function k(e){var t="https://twitter.com/home?status="+encodeURIComponent(e);a("li.atwitter",L).find("a").attr("href",t)}function T(e){var t="https://plus.google.com/share?url="+encodeURIComponent(e);a("li.agoogle",L).find("a").attr("href",t)}var L,I=a.extend({URL:"",version:"2",stream_id:1,mount_point:"",type:"/;type=mp3",streampath:"/stream?icy=http",cors:"https://simbacast.herokuapp.com/?q=",logo:"https://static.macupdate.com/products/60776/l/yt-music-logo.png",vertical_layout:!1,bg:"grey",accent:"deeporange",blur:!1,blur_opacity:.16,lang:"en",src:"",volume:.75,autoplay:!1},e);L=this;var U,R=a(".bg-wpr",L),j=a(".ppBtn",L),_=a(".volume-slider",L),M=a(".vol-icon",L);U=new Audio,U.volume=I.volume,U.preload="auto",L.each(function(){if(I.bg.length>0&&a(R).addClass("bg-"+I.bg),I.accent.length>0&&a(R).addClass("accent-"+I.accent),1==I.blur&&a(".blur",L).css("display","block"),1==I.autoplay&&(U.autoplay=!0),1==I.vertical_layout&&(a(".player-wpr",L).addClass("vertical"),a(".album-cover-wpr",L).addClass("hidden")),x(),1==I.version){U.src=I.URL+"/;type=mp3",I.src=U.src;var e="/"+I.URL+"/7.html",t="/"+I.URL+"/played.html";o(e,t)}else if(2==I.version){U.src=I.URL+I.streampath,I.src=U.src;var e=I.URL+"/stats?sid="+I.stream_id+"&json=1&callback=?",t=I.URL+"/played?sid="+I.stream_id+"&type=json&callback=?";o(e,t)}else if("icecast"==I.version){U.src=I.URL+"/"+I.mount_point,I.src=U.src;var e=""+I.URL+"/status-json.xsl";m(e)}}),a(U).on("playing",function(){t(j,!0),a(j).addClass("stop-btn"),a(j).removeClass("play-btn")}),a(U).on("pause",function(){t(j,!1),a(j).removeClass("stop-btn"),a(j).addClass("play-btn")}),a(j,L).on("click tap",function(){i()});var O=100*U.volume;a(_).val(O),a(".vol-value",L).text(O+"%"),s(),"Microsoft Internet Explorer"==navigator.appName||navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/rv:11/)||"undefined"!=typeof a.browser&&1==a.browser.msie?_.change("input",function(){U.volume=parseInt(this.value,10)/100;var e=100*U.volume,e=Math.round(e);a(".vol-value",L).text(e+"%"),s()},!1):_.on("input",function(){var e=a(_).val();U.volume=e/100;var e=Math.round(e);a(".vol-value",L).text(e+"%"),s()});var G=new Array;if(a(".more",L).on("click tap",function(){a(".more",L).hasClass("morert")?a(".more",L).hasClass("morert")&&(a(".more",L).removeClass("morert"),a(".data-panel",L).fadeOut(400),a(".controls-wpr, .track-info, .album-cover-wpr",L).delay(600).fadeIn(400)):(a(".more",L).addClass("morert"),a(".controls-wpr, .track-info, .album-cover-wpr",L).fadeOut("slow"),a(".data-panel",L).delay(600).fadeIn(400))}),/Android|webOS|iPhone|iPad|iPod|Opera Mini/i.test(navigator.userAgent)&&(a(_).addClass("dis-none"),a(".vol-value").addClass("dis-none"),a(M).addClass("vol-dis")),"en"==I.lang)var H="Online",A="Qlty",E="Genre";if("es"==I.lang)var H="En Linea",A="Calidad",E="Genero";if("pt"==I.lang)var H="Conectados",A="Qualidade",E="Gênero";if("fr"==I.lang)var H="En Ligne",A="Qualité",E="Genre";if("it"==I.lang)var H="In Linea",A="Qualità",E="Genere"}}(jQuery);1